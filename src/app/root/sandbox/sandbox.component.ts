import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';
import {ClothesItem} from '../../class/clothesItem';
import {LookItemService} from '../../service/look-item.service';
import {MatSnackBar} from '@angular/material';
import {PriceService} from '../../service/price.service';
import {Price} from '../../class/price';



@Component({
  selector: 'app-sandbox',
  templateUrl: './sandbox.component.html',
  styleUrls: ['./sandbox.component.css']
})
export class SandboxComponent implements OnInit {

  clothesItems: ClothesItem[];
  public styleOfBoundary: object = {};

  constructor(private lookItemService: LookItemService,
              private priceService: PriceService,
              private snackBar: MatSnackBar) { }

  ngOnInit() {
    this.clothesItems = [];
    this.lookItemService.currentDrop.subscribe(value => {
      if (value) {
        let sum = 0;
        this.clothesItems.forEach(item => {
          sum += item.price.value;
        });
        this.priceService.add(new Price(-sum, 'RUB'));
       this.clothesItems = [];
      }
    });

    this.lookItemService.currentRemove.subscribe(value => {
      const temp: ClothesItem[] = [];
      this.clothesItems.forEach(item => {
        if (item.image !== value) {
          temp.push(item);
        }
      });
      this.clothesItems = temp;
    });

    this.lookItemService.currentDownload.subscribe(value => {
      if (value) {
        this.clothesItems.forEach(item => {
          let binaryData = [];
          binaryData.push(item.image);

          const a = document.createElement('a');
          a.href = window.URL.createObjectURL(new Blob(binaryData, {type: "image/jpeg"}));
          a.download = item.name;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
        });
      }
    });
  }

  setBackground($event) {
    const imageSrc = $event;
    this.styleOfBoundary = {
      background: `url('${imageSrc}')`,
    };
  }

  allowDrop(event) {
    event.preventDefault();
  }

  getDataFromDraggable(event) {
    event.preventDefault();
    const json = event.dataTransfer.getData('json');
    const clothesItem = JSON.parse(json);

    if (this.lookItemService.isConsist(clothesItem.image, this.clothesItems)) {
      this.snackBar.open('These clothes are already there', 'Ã—', {
        duration: 2000,
      });
      return;
    }

    this.clothesItems.push(clothesItem);
    this.priceService.add(clothesItem.price);
  }

  refresh() {
    window.location.reload();
  }

  download() {
    let canvas = document.getElementById('Canvas');
    let context = canvas.getContext('2d');
    let img = new Image();
    let img1 = new Image();
    img.setAttribute('crossOrigin', 'anonymous');
    img1.setAttribute('crossOrigin', 'anonymous');

    img.src = this.clothesItems[0].image;
    img1.src = this.clothesItems[0].image;
    img.src = 'data:image/jpeg;base64,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';
    img.onload = function() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      //context.drawImage(img1, 200, 300);
      context.drawImage(img, 0, 0);
    };

    setTimeout(function () {
      console.log(canvas.toDataURL("image/jpg"));

    }, 1000);

   /* const link = document.createElement('a');
    link.download = 'look.png';
    link.href = canvas.toDataURL("image/jpg");
    link.click();*/
  }
}
